<div class="barber-dashboard-container">
    <header class="dashboard-header">
        <h1>{{ stats.users ? 'Admin Dashboard' : 'My Appointments' }}</h1>
        <p>View and manage your scheduled appointments{{ stats.users ? ' and CRM' : '' }}</p>
    </header>

    <!-- Stats Section -->
    <div class="stats-grid mb-4" *ngIf="stats.users">
        <div class="stat-card">
            <div class="stat-value">{{ stats.leads || 0 }}</div>
            <div class="stat-label">Prospectos</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.opportunities || 0 }}</div>
            <div class="stat-label">Oportunidades</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.appointments || 0 }}</div>
            <div class="stat-label">Citas Totales</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ stats.users || 0 }}</div>
            <div class="stat-label">Usuarios</div>
        </div>
    </div>

    <div class="calendar-section">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Weekly Schedule</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <full-calendar [options]="calendarOptions"></full-calendar>
            </mat-card-content>
        </mat-card>
    </div>

    <div class="appointments-list">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Upcoming Appointments</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <mat-list>
                    <mat-list-item *ngFor="let appointment of appointments">
                        <span matListItemTitle>
                            {{ appointment.startTime | date:'medium' }} - {{ appointment.endTime | date:'shortTime' }}
                        </span>
                        <span matListItemLine>
                            Client: {{ appointment.user?.name || appointment.guestName }}
                        </span>
                        <span matListItemLine>
                            Email: {{ appointment.user?.email || appointment.guestEmail }}
                        </span>
                        <span matListItemLine *ngIf="appointment.guestPhone">
                            Phone: {{ appointment.guestPhone }}
                        </span>
                        <span matListItemLine>Status: {{ appointment.status }}</span>
                    </mat-list-item>
                    <mat-list-item *ngIf="appointments.length === 0">
                        <span matListItemTitle>No appointments scheduled</span>
                    </mat-list-item>
                </mat-list>
            </mat-card-content>
        </mat-card>
    </div>
</div>